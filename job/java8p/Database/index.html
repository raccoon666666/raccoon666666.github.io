
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0, user-scalable=no">
        <title>Document</title>
        <style>
        .question {
        border: 5px cornflowerblue solid;
        border-radius: 15px;
        padding: 10px;
        font-size: 24px;
        color: cornflowerblue;
        text-align: center;
    }</style>
        <style>
        .answer {
        width: fit-content;
        margin-left: auto;
        margin-right: auto;
        border: 1px orange solid;
        border-radius: 5px;
        padding: 20px;
        font-size: 20px;
        color: black;
    }</style>
    </head>
    <body>
        
            <p class="question">01.yml&nbsp;Q:&amp;nbsp;索引的类型有哪些?&lt;br&gt;</p>
        
            <p class="answer">A:&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;物理类型:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;B+树:&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;遍历到叶子获得Key,不一定回表查询(聚簇,Select索引列)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Hash:&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;先Hash获得Key,然后回表查询&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;等值查询快(但重复值多时容易碰撞性能下降)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;无法索引排序、范围查询(Hash丢失了顺序)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;不能用联合索引、模糊查询&lt;br&gt;&amp;nbsp;&amp;nbsp;使用类型:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;主键索引:&amp;nbsp;不允许重复;不允许NULL;一表一个;可作外键;性能更高&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;唯一索引:&amp;nbsp;不允许重复;允许NULL;一表多个;不可作外键&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;普通索引:&amp;nbsp;允许重复,允许NULL&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;组合索引:&amp;nbsp;列值的组合必须唯一&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;全文索引:&amp;nbsp;Fulltext,对(CHAR、VARCHAR、TEXT)建立的所有,支持值的全文查找&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;空间索引:&amp;nbsp;Spatial,对空间数据类型(非NULL)(GEOMETRY、POINT、LINESTRING、POLYGON)建立的索引&lt;br&gt;</p>
        
            <p class="question">02.yml&nbsp;Q:&amp;nbsp;哪些字段要使用索引,什么时候生效?&amp;nbsp;哪些不要用,什么时候失效?&lt;br&gt;</p>
        
            <p class="answer">A:&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;适用:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;常查询&amp;nbsp;=&gt;&amp;nbsp;普通索引&amp;nbsp;=&gt;&amp;nbsp;加速查询&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;外键字段&amp;nbsp;=&gt;&amp;nbsp;普通索引&amp;nbsp;=&gt;&amp;nbsp;加速表连接&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;排序字段&amp;nbsp;=&gt;&amp;nbsp;组合索引&amp;nbsp;=&gt;&amp;nbsp;加速组合排序&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;唯一性的列&amp;nbsp;=&gt;&amp;nbsp;唯一索引&amp;nbsp;=&gt;&amp;nbsp;保证数据完整性&lt;br&gt;&amp;nbsp;&amp;nbsp;不适用:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;频繁更新的字段&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;数据量较少的表&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;数据不同值较少的列(男女)&lt;br&gt;&amp;nbsp;&amp;nbsp;失效:&amp;nbsp;&amp;nbsp;#&amp;nbsp;explain语句查看查询流程&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;返回值:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;字段参与了计算、函数、隐式转换、显式转换&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;单条件:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;IS&amp;nbsp;NULL&amp;nbsp;;&amp;nbsp;IS&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;;&amp;nbsp;!=&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;通配符在最前的模糊查询(like&amp;nbsp;'%111')(可使用reverse改进)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;组合条件:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;组合索引中没有按照左前缀匹配(无头,中断)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;组合索引中某字段范围比较,若之后不是范围比较则失效&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;若OR连接条件中存在非索引列则失效;若全是索引列则根据cost&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;排序:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;where和group|order一起使用时,条件中没用索引而排序中用了(后者失效)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;where中索引最好和group|order索引组合成组合索引</p>
        
            <p class="question">03.yml&nbsp;Q:&amp;nbsp;索引的底层存储原理是什么?&lt;br&gt;</p>
        
            <p class="answer">A:&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;MyISAM:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;使用B+树,索引与数据分离&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;主索引和辅助索引相同,记录了&lt;Col,行的磁盘地址&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;InnoDB:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;存储:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;使用B+树,索引与数据合一&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;主索引(聚簇索引),记录了&lt;PKey,行数据&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;辅助索引,记录了&lt;Col,Pkey&gt;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;联合索引,记录了&lt;Col&amp;Col,Pkey&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;要求:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;要求表必须有主键,否则自动选择某列,再否则自动生成long6字段作主键&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;辅助索引搜索时要搜索两次&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;Pkey不宜过长,因为每个辅助索引存储的是Pkey本身&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;Pkey要自增,否则构造B+树时要频繁分裂插值&lt;br&gt;&lt;br&gt;</p>
        
            <p class="question">04.yml&nbsp;Q:&amp;nbsp;索引的作用有哪些?弊端有哪些?&lt;br&gt;</p>
        
            <p class="answer">A:&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;作用:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;加速表查询、连接、分组、排序&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;使用唯一索引保证行的唯一性&lt;br&gt;&amp;nbsp;&amp;nbsp;弊端:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;创建索引需要时间&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;索引文件占磁盘空间&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;只加速了查,增删改时需同步更新索引&lt;br&gt;</p>
        
            <p class="question">05.yml&nbsp;Q:&amp;nbsp;什么时候会索引重建?如何重建?重建的原理是什么?&lt;br&gt;</p>
        
            <p class="answer">A:&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;时机:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;表上频繁发生增删改&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;对表move使行的id发生变化&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;height&gt;=4或DEL_LF_ROWS/LF_ROWS&gt;0.2&lt;br&gt;&amp;nbsp;&amp;nbsp;方法:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;先drop然后create,耗时长&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;alter&amp;nbsp;rebuild,耗时短&lt;br&gt;&amp;nbsp;&amp;nbsp;原理:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;在旧索引基础上重建,并写入备份文件,防止意外丢失&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;使用online参数减少加锁问题;生成系统临时日志表(记录索引变化)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;获取数据&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;重建时排序&amp;nbsp;&amp;nbsp;&amp;nbsp;阻塞DML&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;rebuild&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;扫描旧索引&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;有&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;会&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;rebuild&amp;nbsp;online&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;扫描表&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;有&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;不会&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br&gt;</p>
        
            <p class="question">06.yml&nbsp;Q:&amp;nbsp;说说你对数据库数据完整性的理解&lt;br&gt;</p>
        
            <p class="answer">A:&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;作用:&amp;nbsp;使数据库能真实反应现实世界&lt;br&gt;&amp;nbsp;&amp;nbsp;功能:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;允许用户定义数据完整性约束条件&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;对于提交的请求检查是否违背完整性(分为立即检查、延迟检查)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;对于违背完整性的操作要采取动作&lt;br&gt;&amp;nbsp;&amp;nbsp;实体完整性:&amp;nbsp;主键不能重复,不能为NULL&lt;br&gt;&amp;nbsp;&amp;nbsp;参照完整性:&amp;nbsp;不能为NULL&lt;br&gt;&amp;nbsp;&amp;nbsp;用户定义完整性:&amp;nbsp;满足表达式</p>
        
            <p class="question">07.yml&nbsp;Q:&amp;nbsp;为什么选择B+树作索引的存储结构?&lt;br&gt;</p>
        
            <p class="answer">A:&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;反例:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;二叉树:&amp;nbsp;节点只存一个数据,高度太高(一般用于内存查值)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;B树:&amp;nbsp;节点含数据,降低了每页中索引节点的数量&lt;br&gt;&amp;nbsp;&amp;nbsp;原因:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;IO代价更低,索引节点不含数据,一个盘块包含更多的索引节点&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;查询效率稳定,任何查询都是从根节点到叶子节点&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;便于遍历,数据节点在最底层且通过链表连接&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;便于范围查找,数据节点已排好序,位于最底层</p>
        
            <p class="question">08.yml&nbsp;Q:&amp;nbsp;如何分页?如何对分页优化?&lt;br&gt;</p>
        
            <p class="answer">A:&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;分页方式:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;Limit&amp;nbsp;Page返回一个Page&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;Limit&amp;nbsp;Skip,Page跳过前N行返回一个Page&lt;br&gt;&amp;nbsp;&amp;nbsp;优化:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;索引覆盖:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;建立联合索引(id,sort)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;ORDER&amp;nbsp;BY&amp;nbsp;sort&amp;nbsp;LIMIT&amp;nbsp;n&amp;nbsp;返回id列,避免查表&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;然后使用对该临时表关联,以获取其他列&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;转位置查询:&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;若无需对表动态排序&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;则使用position列记录行号,建索引&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;使用WHERE&amp;nbsp;position&amp;nbsp;BETWEEN&amp;nbsp;a&amp;nbsp;AND&amp;nbsp;b查询&lt;br&gt;</p>
        
            <p class="question">09.yml&nbsp;Q:&amp;nbsp;什么是SQL注入攻击?如何避免?&lt;br&gt;</p>
        
            <p class="answer">A:&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;-&amp;nbsp;参数检验&lt;br&gt;&amp;nbsp;&amp;nbsp;-&amp;nbsp;预编译(预编译是什么?)&lt;br&gt;&amp;nbsp;&amp;nbsp;-&amp;nbsp;MyBatis用#占位符&lt;br&gt;</p>
        
    </body>
    </html>
